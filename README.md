# Window Object Keyword Searcher

一个强大的浏览器油猴脚本，用于在 `window` 对象中递归搜索关键字。

## 📋 功能介绍

- **递归搜索**：深度可配置，默认深度为 500 层
- **灵活的搜索范围**：支持在对象键名和值中搜索关键字
- **数组和对象支持**：能够处理复杂的嵌套数据结构
- **循环引用检测**：使用 WeakSet 防止无限循环
- **交互式面板**：美观的浮窗界面，支持折叠/展开
- **实时搜索**：支持回车键快速搜索

## 🚀 安装方法

### 前置条件
- 安装 [Tampermonkey](https://www.tampermonkey.net/) 浏览器扩展

### 安装步骤

1. 打开 Tampermonkey 仪表板
2. 点击 "创建新脚本"
3. 复制本项目中 `window-object-keyword-searcher.js` 的全部代码
4. 粘贴到编辑器中
5. 保存脚本（Ctrl+S 或 Cmd+S）
6. 刷新网页，脚本即可生效

## 💡 使用方法

### 基本使用

1. 打开任意网页
2. 在右上角找到 **"Window 搜索器"** 浮窗
3. 在输入框中输入要搜索的关键字
4. （可选）修改搜索深度（默认 500）
5. 点击 **"搜索"** 按钮或按 **Enter** 键
6. 在结果区域查看匹配项

### 搜索示例

| 场景 | 关键字 | 说明 |
|------|--------|------|
| 查找 API 端点 | `api` | 搜索所有包含 "api" 的键名和值 |
| 查找用户信息 | `userId` | 查找用户相关的属性 |
| 查找配置信息 | `config` | 搜索配置对象 |
| 查找特定值 | `https://` | 查找所有 URL |

## 🎨 界面说明

### 浮窗组件

```
┌─────────────────────────────┐
│ Window 搜索器          ▼     │  ← 点击可折叠/展开
├─────────────────────────────┤
│ [输入关键字...]              │  ← 输入搜索关键字
│ 深度: [500]  [搜索]          │  ← 设置深度和搜索
├─────────────────────────────┤
│ 搜索结果:                    │
│ window.api: 键名匹配         │  ← 显示匹配项
│ window.data.url: "https://..." │
└─────────────────────────────[object Object] 搜索原理

### 搜索流程

1. **初始化**：从 `window` 对象开始
2. **键名检查**：检查当前对象的所有键名是否包含关键字
3. **值检查**：检查字符串类型的值是否包含关键字
4. **递归遍历**：对嵌套的对象和数组进行递归搜索
5. **深度控制**：根据设定的最大深度限制搜索范围
6. **循环检测**：使用 WeakSet 记录已访问对象，防止循环引用

### 支持的数据类型

- ✅ 普通对象 `{}`
- ✅ 数组 `[]`
- ✅ 嵌套结构
- ✅ 字符串值
- ⚠️ 其他类型（仅检查键名）

## ⚙️ 配置参数

| 参数 | 默认值 | 范围 | 说明 |
|------|--------|------|------|
| 搜索深度 | 500 | 1-10 | 递归搜索的最大深度 |
| 关键字 | - | - | 要搜索的关键字（不区分大小写） |

## 📊 性能考虑

- **搜索深度**：深度越大，搜索越全面但耗时越长
- **关键字长度**：更具体的关键字能加快搜索速度
- **对象规模**：大型对象可能需要较长时间

### 优化建议

1. 使用具体的关键字而不是通用词
2. 根据需要调整搜索深度
3. 避免在复杂的单页应用中搜索过于宽泛的关键字

## 🐛 常见问题

### Q: 搜索没有结果怎么办？
A: 
- 检查关键字拼写是否正确
- 尝试增加搜索深度
- 确认目标数据确实存在于 window 对象中

### Q: 脚本运行很慢？
A:
- 减少搜索深度
- 使用更具体的关键字
- 关闭其他浏览器扩展

### Q: 如何在特定网站禁用脚本？
A: 在 Tampermonkey 中编辑脚本，修改 `@match` 规则

## 📝 版本历史

### v1.2
- 支持数组和对象中键名及值的关键字查询
- 优化搜索算法
- 改进 UI 交互

### v1.1
- 添加深度控制
- 改进循环引用检测

### v1.0
- 初始版本
- 基础搜索功能

## 🛠️ 技术栈

- **语言**：JavaScript (ES6+)
- **运行环境**：Tampermonkey 油猴脚本
- **兼容性**：所有现代浏览器

## 📄 许可证

MIT License

## 👨‍💻 作者

**Rakers1024**

## 🤝 贡献

欢迎提交 Issue 和 Pull Request！

## 💬 反馈

如有问题或建议，请通过以下方式联系：
- 提交 GitHub Issue
- 在脚本评论区留言

---

**最后更新**：2025年11月25日

**版本**：1.2

